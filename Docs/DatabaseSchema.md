# Poseidon API - Database Schema

## Table of Contents
1. [Introduction](#introduction)
2. [Collections Overview](#collections-overview)
   - [Passengers Collection](#passengers-collection)
   - [Users Collection](#users-collection)
   - [Tokens Collection](#tokens-collection)
3. [Field Descriptions](#field-descriptions)
   - [Passenger Fields](#passenger-fields)
   - [User Fields](#user-fields)
   - [Token Fields](#token-fields)
4. [Indexes](#indexes)
5. [Sample Documents](#sample-documents)

---

## 1. Introduction

This document outlines the schema and structure of the collections stored in MongoDB for the Poseidon API project. Since MongoDB is a NoSQL database, collections store documents in JSON-like format (BSON), and each collection is used to represent a distinct entity or group of data.

For this project, the key collections are:

- **Passengers**: Stores information about Titanic passengers.
- **Users**: Stores user information, including authentication data.
- **Tokens**: Stores JWT tokens for session management (optional).

---

## 2. Collections Overview

### **Passengers Collection**

- **Collection Name**: `passengers`
- **Description**: This collection holds the data for passengers on the Titanic, including details like name, age, fare, class, and survival status.
- **Document Example**:
  ```json
  {
    "_id": "60d5b2c2b45e3d5f348f5b76",
    "survived": true,
    "pclass": 1,
    "name": "John Doe",
    "sex": "male",
    "age": 35,
    "siblingsOrSpousesAboard": 1,
    "parentsOrChildrenAboard": 0,
    "fare": 85.50
  }
  ```

### **Users Collection**

- **Collection Name**: `users`
- **Description**: This collection contains user information, including email, password, role (Admin/User), and other details for authentication and authorization.
- **Document Example**:
  ```json
  {
    "_id": "60d5b2d3b45e3d5f348f5b79",
    "username": "admin_user",
    "email": "admin@example.com",
    "password": "$2a$12$34ksdja38...",
    "role": "Admin"
  }
  ```

### **Tokens Collection** (Optional)

- **Collection Name**: `tokens`
- **Description**: This collection stores JWT tokens for session management, allowing users to stay logged in. Tokens are time-bound and expire after a set duration.
- **Document Example**:
  ```json
  {
    "_id": "60d5b2e4b45e3d5f348f5b82",
    "userId": "60d5b2d3b45e3d5f348f5b79",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expirationDate": "2024-09-22T10:12:24.000Z"
  }
  ```

---

## 3. Field Descriptions

### **Passenger Fields**

| Field                    | Type     | Description |
|--------------------------|----------|-------------|
| `_id`                     | `string` | Unique identifier (ObjectId) for each passenger document, auto-generated by MongoDB. |
| `survived`                | `boolean`| Indicates whether the passenger survived the Titanic sinking (`true` for survived, `false` otherwise). |
| `pclass`                  | `int`    | The class in which the passenger traveled (`1` for first class, `2` for second class, `3` for third class). |
| `name`                    | `string` | The full name of the passenger. |
| `sex`                     | `string` | Gender of the passenger (`male` or `female`). |
| `age`                     | `double` | The age of the passenger (can be null if not available). |
| `siblingsOrSpousesAboard`  | `int`    | Number of siblings or spouses aboard the Titanic with this passenger. |
| `parentsOrChildrenAboard`  | `int`    | Number of parents or children aboard the Titanic with this passenger. |
| `fare`                    | `double` | The fare paid by the passenger for their ticket (can be null if not available). |

### **User Fields**

| Field     | Type     | Description |
|-----------|----------|-------------|
| `_id`     | `string` | Unique identifier (ObjectId) for each user document, auto-generated by MongoDB. |
| `username`| `string` | Username selected by the user. Must be unique. |
| `email`   | `string` | User's email address. Must be unique. |
| `password`| `string` | Hashed password used for authentication (hashed using a secure algorithm like bcrypt). |
| `role`    | `string` | The role of the user (`Admin` or `User`). Admins have elevated permissions, whereas Users have restricted access. |

### **Token Fields** (Optional)

| Field            | Type     | Description |
|------------------|----------|-------------|
| `_id`            | `string` | Unique identifier (ObjectId) for each token document, auto-generated by MongoDB. |
| `userId`         | `string` | The user ID that the token belongs to (foreign key referencing the `users` collection). |
| `token`          | `string` | The JWT token string issued during user login. |
| `expirationDate` | `date`   | The expiration date for the token, after which the user will be logged out. |

---

## 4. Indexes

Indexes are important for optimizing query performance, especially for frequently accessed data. Below are the suggested indexes for the Poseidon API:

### **Passengers Collection Indexes**:
- **Index on `_id`**: MongoDB automatically indexes the `_id` field, which is used as the primary key for all documents.
- **Index on `pclass`**: Indexing the passenger class (`pclass`) can speed up queries that filter passengers by class.
- **Index on `survived`**: Indexing the `survived` field can improve performance for queries that filter based on survival status.
  
### **Users Collection Indexes**:
- **Index on `_id`**: MongoDB automatically indexes the `_id` field.
- **Index on `email`**: Since emails must be unique, indexing this field will speed up lookups and ensure uniqueness.

---

## 5. Sample Documents

### **Sample Passenger Document**:
```json
{
    "_id": "60d5b2c2b45e3d5f348f5b76",
    "survived": true,
    "pclass": 1,
    "name": "John Doe",
    "sex": "male",
    "age": 35,
    "siblingsOrSpousesAboard": 1,
    "parentsOrChildrenAboard": 0,
    "fare": 85.50
}
```

### **Sample User Document**:
```json
{
    "_id": "60d5b2d3b45e3d5f348f5b79",
    "username": "admin_user",
    "email": "admin@example.com",
    "password": "$2a$12$34ksdja38...",
    "role": "Admin"
}
```

### **Sample Token Document** (Optional):
```json
{
    "_id": "60d5b2e4b45e3d5f348f5b82",
    "userId": "60d5b2d3b45e3d5f348f5b79",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expirationDate": "2024-09-22T10:12:24.000Z"
}
```
